(this["webpackJsonp@socialgouv/sqlite-browser"]=this["webpackJsonp@socialgouv/sqlite-browser"]||[]).push([[0],{141:function(e,t,n){"use strict";(function(e){var c=n(52),r=n(149),s=n(9),a=n(2),o=n(38),i=n.n(o),u=n(0),l=n(259),j=n(260),b=n(148),f=n(150),O=n(1),d=function(e){var t=e.onDrop,n=e.status,c=e.style,r=Object(b.a)({onDrop:t}),s=r.getRootProps,o=r.getInputProps,i=r.isDragActive,l=r.isDragAccept,j=r.isDragReject,f=Object(u.useMemo)((function(){return Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)({},i?{borderColor:"#00e676"}:{}),l?{borderColor:"#00e676"}:{}),j?{borderColor:"#ff1744"}:{}),c)}),[i,j,l,c]);return Object(O.jsxs)("div",Object(a.a)(Object(a.a)({},s({style:f})),{},{className:"dropZone",children:[Object(O.jsx)("input",Object(a.a)({},o())),n&&Object(O.jsx)("div",{children:n})||Object(O.jsxs)("div",{children:["Glissez un fichier sqlite ici",Object(O.jsx)("br",{}),Object(O.jsxs)("div",{style:{fontSize:"0.5em"},children:["(Exemple :",Object(O.jsx)("a",{onClick:function(e){e.stopPropagation()},href:"https://github.com/lerocha/chinook-database/raw/master/ChinookDatabase/DataSources/Chinook_Sqlite.sqlite",children:"Chinook_Sqlite.sqlite"}),")"]})]})]}))};t.a=function(){var t=Object(u.useState)([]),n=Object(s.a)(t,2),a=n[0],o=n[1],b=Object(u.useCallback)((function(e){o([].concat(Object(r.a)(a),[e]))}),[a]),h=Object(u.useState)({status:"",msg:""}),m=Object(s.a)(h,2),v=m[0],x=m[1],p=function(){x({status:"",msg:""})},g=Object(u.useCallback)((function(t){if(p(),t.length){x({status:"running",msg:"Chargement..."});var n=new FileReader,r=t[0];n.onload=function(){var t=Object(c.a)(i.a.mark((function t(n){var c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:x({status:"",msg:""}),c=e.from(n.target.result),b({name:r.name,source:c});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.readAsArrayBuffer(r)}else x({status:"error",msg:"Aucun fichier d\xe9tect\xe9"}),p()}),[b]),w=a.length?"auto":"40vh";return Object(O.jsxs)(l.a,{fluid:!0,children:[Object(O.jsxs)(j.a,{style:{marginTop:20,textAlign:"center"},children:[Object(O.jsx)("h1",{children:"sqlite-browser"}),Object(O.jsx)("p",{children:"Explorez vos donn\xe9es SQLite"})]}),Object(O.jsx)(d,{onDrop:g,status:v.msg,style:{height:w}}),a.map((function(e,t){return Object(O.jsxs)("div",{children:[Object(O.jsx)("h3",{children:e.name}),Object(O.jsx)(f.a,{source:e.source}),Object(O.jsx)("hr",{})]},e.name)}))]})}}).call(this,n(11).Buffer)},150:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var c=n(9),r=n(0),s=n(52),a=n(38),o=n.n(a),i=n(142),u=n.n(i),l=function(e,t){var n=Object(r.useState)(null),s=Object(c.a)(n,2),a=s[0],o=s[1];return Object(r.useEffect)((function(){if(t)try{var n=e.exec(t);o(n[0])}catch(c){console.error(c),o(null)}else o(null)}),[t,e]),[a]},j=n(266),b=n(267),f=n(268),O=n(263),d=n(264),h=n(265),m=n(1),v=function(e){var t=e.columns,n=e.rows;return Object(m.jsxs)(O.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(m.jsx)("thead",{children:Object(m.jsx)("tr",{children:t&&t.map((function(e){return Object(m.jsx)("th",{children:e},e)}))})}),Object(m.jsx)("tbody",{children:n&&n.map((function(e,n){return Object(m.jsx)("tr",{children:t&&t.map((function(t,c){return Object(m.jsx)("td",{style:{maxWidth:"100%",overflow:"hidden"},children:e[c]},n+"-"+c)}))},"row-".concat(n))}))})]})},x=function(e){var t=e.db,n=e.name,s=e.limit,a=void 0===s?10:s,o=function(e){var t,n=e.db,s=e.table,a=e.query,o=e.limit,i=void 0===o?10:o,u=l(n,"".concat(a.replace(/;\s*$/,"")," LIMIT 1 OFFSET 0")),j=Object(c.a)(u,1)[0],b=l(n,s?"select count(*) from ".concat(s):"select 0"),f=Object(c.a)(b,1)[0],O=j&&j.columns||[],d=Object(r.useState)(null),h=Object(c.a)(d,2),m=h[0],v=h[1],x=l(n,m),p=Object(c.a)(x,1)[0],g=Object(r.useState)(0),w=Object(c.a)(g,2),C=w[0],S=w[1],y={total:f&&f.values[0][0]||(null===p||void 0===p||null===(t=p.values)||void 0===t?void 0:t.length)||0,offset:C,limit:i};return Object(r.useEffect)((function(){v("".concat(a.replace(/;\s*$/,"")," LIMIT ").concat(i," OFFSET ").concat(C))}),[a,C,i]),{columns:O,rows:(null===p||void 0===p?void 0:p.values)||[],pagination:y,setOffset:S}}({db:t,table:n,query:"SELECT * from ".concat(n),limit:a}),i=o.columns,u=o.rows,j=o.pagination,b=o.setOffset;return i&&Object(m.jsxs)("div",{children:[Object(m.jsx)(v,{columns:i,rows:u}),j&&u&&Object(m.jsxs)(d.a,{size:"sm",children:[Object(m.jsx)(h.a,{onClick:function(){b(Math.max(0,j.offset-j.limit))},disabled:!j.offset,children:"Prev"}),Object(m.jsx)(h.a,{onClick:function(){b(j.offset+u.length)},disabled:j.offset+j.limit>j.total,children:"Next"})]})]})},p=function(e){var t=e.db,n=Object(r.useState)(""),s=Object(c.a)(n,2),a=s[0],o=s[1],i=l(t,a),u=Object(c.a)(i,1)[0];return Object(m.jsxs)("div",{children:[Object(m.jsx)(j.a.Control,{value:a,onChange:function(e){return o(e.target.value)},as:"textarea",rows:2,placeholder:"select * from album;"}),Object(m.jsx)("br",{}),u&&Object(m.jsxs)("div",{children:[u.values.length," result(s)",Object(m.jsx)("br",{}),Object(m.jsx)(v,{rows:u.values,columns:u.columns})]})]})},g=function(e){var t=function(e){var t=Object(r.useState)(null),n=Object(c.a)(t,2),a=n[0],i=n[1],l=Object(r.useCallback)(function(){var e=Object(s.a)(o.a.mark((function e(t){var n,r,s,a,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Promise,e.t1=u()({locateFile:function(e){return"https://sql.js.org/dist/".concat(e)}}),e.next=4,t;case 4:return e.t2=e.sent,e.t3=[e.t1,e.t2],e.next=8,e.t0.all.call(e.t0,e.t3);case 8:n=e.sent,r=Object(c.a)(n,2),s=r[0],a=r[1],l=new s.Database(new Uint8Array(a)),i(l);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(r.useEffect)((function(){if(!a)return l(e),function(){console.log("close db"),a&&a.close()}}),[l,e,a]),[a]}(e.source),n=Object(c.a)(t,1)[0],a=Object(r.useMemo)((function(){return function(e){return e&&e.exec("SELECT name FROM sqlite_schema WHERE type ='table' AND name NOT LIKE 'sqlite_%';").flatMap((function(e){return e.values.map((function(e){return e.toString()}))}))||[]}(n)}),[n]);return n&&a&&a.length&&Object(m.jsxs)(b.a,{defaultActiveKey:a[0],className:"mb-3",children:[Object(m.jsx)(f.a,{eventKey:"sql",title:"SQL",children:Object(m.jsx)(p,{db:n})},"sql"),a.map((function(e){return Object(m.jsx)(f.a,{eventKey:e,title:e,children:Object(m.jsx)(x,{db:n,name:e},e)},e)}))]})||null}},156:function(e,t,n){},162:function(e,t){},164:function(e,t){},174:function(e,t){},176:function(e,t){},203:function(e,t){},204:function(e,t){},209:function(e,t){},211:function(e,t){},218:function(e,t){},237:function(e,t){},258:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),s=n(25),a=n.n(s),o=(n(155),n(156),n(141)),i=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,269)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),s(e),a(e)}))},u=n(1);a.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(o.a,{})}),document.getElementById("root")),i()}},[[258,1,2]]]);
//# sourceMappingURL=main.0c8b4039.chunk.js.map